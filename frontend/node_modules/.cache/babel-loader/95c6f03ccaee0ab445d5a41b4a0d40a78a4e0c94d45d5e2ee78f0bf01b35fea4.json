{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\OneDrive\\\\Desktop\\\\projects\\\\mern_blog_naman (1) (4)\\\\mern_blog_naman (1)\\\\mern_blog_naman\\\\frontend\\\\src\\\\Header.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { UserContext } from './UserContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Header = () => {\n  _s();\n  const {\n    userInfo,\n    setUserInfo\n  } = useContext(UserContext);\n  const navigate = useNavigate();\n  const username = localStorage.getItem(\"isLoggedIn\");\n  const fetchProfile = async () => {\n    if (username == true) {\n      try {\n        const response = await fetch('http://localhost:4000/profile', {\n          method: 'POST',\n          body: JSON.stringify({\n            \"token\": localStorage.getItem(\"token\")\n          }),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        if (!response.ok) {\n          throw new Error(`Error fetching profile. Status: ${response.status}`);\n        }\n        const userProfile = await response.json();\n        setUserInfo(userProfile);\n      } catch (error) {\n        console.error('Error fetching profile:', error);\n      }\n    }\n  };\n  useEffect(() => {\n    fetchProfile();\n  }, [username]);\n  const logout = async () => {\n    try {\n      setUserInfo(null);\n      localStorage.setItem(\"isLoggedIn\", false);\n      localStorage.clear();\n      navigate('/');\n    } catch (error) {\n      console.error('Error during logout:', error.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"header\", {\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: \"/\",\n      className: \"logo\",\n      children: \"My Blog\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      children: username ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/create\",\n          children: \"Create new post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: logout,\n          className: \"logout-button\",\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          children: \"Registration\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n_s(Header, \"bZePOHT0twV6k+fo60F0t+2PHbk=\", false, function () {\n  return [useNavigate];\n});\n_c = Header;\nexport default Header;\nvar _c;\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"names":["React","useContext","useEffect","Link","useNavigate","UserContext","jsxDEV","_jsxDEV","Fragment","_Fragment","Header","_s","userInfo","setUserInfo","navigate","username","localStorage","getItem","fetchProfile","response","fetch","method","body","JSON","stringify","headers","ok","Error","status","userProfile","json","error","console","logout","setItem","clear","message","children","to","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["C:/Users/DELL/OneDrive/Desktop/projects/mern_blog_naman (1) (4)/mern_blog_naman (1)/mern_blog_naman/frontend/src/Header.js"],"sourcesContent":["import React, { useContext, useEffect } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { UserContext } from './UserContext';\r\n\r\nconst Header = () => {\r\n  const { userInfo,setUserInfo } = useContext(UserContext);\r\n  const navigate = useNavigate();\r\n  const username = localStorage.getItem(\"isLoggedIn\");\r\n  const fetchProfile = async () => {\r\n    if(username==true){\r\n      try {\r\n        const response = await fetch('http://localhost:4000/profile', {\r\n            method: 'POST',\r\n            body: JSON.stringify({ \"token\": localStorage.getItem(\"token\") }),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n        });\r\n\r\n        if (!response.ok) {\r\n            throw new Error(`Error fetching profile. Status: ${response.status}`);\r\n        }\r\n\r\n        const userProfile = await response.json();\r\n        setUserInfo(userProfile);\r\n    } catch (error) {\r\n        console.error('Error fetching profile:', error);\r\n    }\r\n    }\r\n};\r\n\r\n  useEffect(()=>{\r\n      fetchProfile()\r\n  },[username])\r\n\r\n  const logout = async () => {\r\n    try {\r\n      setUserInfo(null);\r\n      localStorage.setItem(\"isLoggedIn\",false);\r\n      localStorage.clear();\r\n      navigate('/');\r\n    } catch (error) {\r\n      console.error('Error during logout:', error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <header>\r\n      <Link to=\"/\" className=\"logo\">\r\n        My Blog\r\n      </Link>\r\n      <nav>\r\n        {username ? (\r\n          <>\r\n            <Link to=\"/create\">Create new post</Link>\r\n            <button onClick={logout} className=\"logout-button\">\r\n              Logout\r\n            </button>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Link to=\"/login\">Login</Link>\r\n            <Link to=\"/register\">Registration</Link>\r\n          </>\r\n        )}\r\n      </nav>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}